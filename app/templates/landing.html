{% extends 'base.html' %}
{% block title %}Commission Intelligence for Insurance Agencies · TrackYourSheets{% endblock %}

{% block main_wrapper %}
<main class="landing-main">
  {% block flash_messages %}{{ super() }}{% endblock %}

  {% if show_dashboard_link %}
  <section class="landing-section landing-section--notice py-0">
    <div class="container py-3">
      <div class="alert alert-primary d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3 shadow-sm mb-0">
        <div class="d-flex align-items-start gap-3">
          <span class="badge rounded-circle bg-primary-soft text-primary flex-shrink-0"><i class="bi bi-house-heart"></i></span>
          <div>
            <h2 class="h5 mb-1 text-primary-emphasis">Welcome back!</h2>
            <p class="mb-0 text-muted">You&apos;re signed in, so explore the refreshed homepage or jump right back into your workspace when you&apos;re ready.</p>
          </div>
        </div>
        <a href="{{ url_for('main.dashboard') }}" class="btn btn-primary btn-lg shadow-sm">Return to dashboard</a>
      </div>
    </div>
  </section>
  {% endif %}

  <section class="landing-hero text-white py-6 position-relative overflow-hidden">
    <div class="landing-hero__spark landing-hero__spark--one"></div>
    <div class="landing-hero__spark landing-hero__spark--two"></div>
    <div class="landing-hero__grid"></div>
    <div class="container">
      <div class="row align-items-center g-5">
        <div class="col-lg-6">
          <span class="badge rounded-pill bg-glass mb-3 animate-fade-in">Purpose-built for insurance revenue leaders</span>
          <h1 class="display-4 fw-bold mb-3 animate-slide-up">Illuminate every commission dollar the moment it posts.</h1>
          <p class="lead text-white-75 mb-4 animate-slide-up delay-1">TrackYourSheets unifies carrier statements, reconciles producer payouts, and surfaces actionable insights so you can grow with confidence.</p>
          <div class="d-flex flex-column flex-sm-row gap-3 animate-slide-up delay-2">
            <a href="{{ url_for('auth.signup') }}" class="btn btn-light btn-lg shadow-sm">Start 14-day free trial</a>
            <a href="#features" class="btn btn-outline-light btn-lg">Explore the platform</a>
          </div>
          <div class="d-flex flex-wrap gap-4 mt-5 hero-metrics animate-slide-up delay-3">
            {% for metric in hero_metrics %}
            <div class="metric-card">
              <div class="metric-value">{{ metric.value }}</div>
              <div class="metric-label">{{ metric.label }}</div>
            </div>
            {% endfor %}
          </div>
        </div>
        <div class="col-lg-6">
          <div class="hero-visual floating-card">
            <div class="hero-visual__glow"></div>
            <div class="hero-visual__card shadow-lg">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <div>
                  <div class="text-white-75 small">Workspace health</div>
                  <h2 class="h4 text-white mb-0">Renewal Outlook</h2>
                </div>
                <span class="badge bg-success-soft text-success">+18% YoY</span>
              </div>
              <div class="hero-chart">
                <div class="bar" style="height: 65%"></div>
                <div class="bar" style="height: 82%"></div>
                <div class="bar" style="height: 58%"></div>
                <div class="bar" style="height: 94%"></div>
                <div class="bar" style="height: 71%"></div>
              </div>
              <div class="d-flex justify-content-between align-items-center mt-4">
                <div>
                  <div class="text-white-75 small">Variance alerts</div>
                  <div class="fs-4 fw-semibold">3 unresolved</div>
                </div>
                <div class="text-end">
                  <div class="text-white-75 small">Average time to resolve</div>
                  <div class="fs-4 fw-semibold">3m 12s</div>
                </div>
              </div>
              <hr class="border-white-25 my-4">
              <div class="d-flex flex-column gap-2">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="text-white-75 small">Automation runs</div>
                  <span class="badge bg-primary-soft text-white">42 today</span>
                </div>
                <div class="progress progress-thin">
                  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 78%" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <small class="text-white-50">Playbooks executed automatically across imports, payouts, and compliance reviews.</small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="scroll-indicator animate-fade-in delay-3">
        <span class="scroll-indicator__dot"></span>
        <span class="scroll-indicator__label">Scroll to see what&apos;s new</span>
      </div>
    </div>
  </section>

  <section class="py-6 landing-section landing-section--spotlight">
    <div class="container">
      <div class="row align-items-end g-4 mb-5">
        <div class="col-lg-8">
          <span class="badge rounded-pill bg-info-soft text-info fw-semibold">Command center</span>
          <h2 class="display-6 fw-bold mt-3">Run revenue operations with clarity, automation, and trust.</h2>
          <p class="text-muted lead">The TrackYourSheets command center ties together insights, workflows, and controls so your team can orchestrate commission operations at scale.</p>
        </div>
        <div class="col-lg-4 text-lg-end">
          <div class="text-muted small">Trusted by regional brokerages, MGA networks, and multi-state agencies managing billions in premium.</div>
        </div>
      </div>
      <div class="row g-4 pillars-grid">
        {% for pillar in operations_pillars %}
        <div class="col-md-4">
          <div class="pillar-card animate-rise">
            <div class="icon-badge mb-3"><i class="bi {{ pillar.icon }}"></i></div>
            <h3 class="h4 mb-1">{{ pillar.title }}</h3>
            <p class="text-primary fw-semibold mb-2">{{ pillar.stat }}</p>
            <p class="text-muted mb-0">{{ pillar.description }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section id="features" class="py-6 bg-white landing-section">
    <div class="container">
      <div class="row justify-content-center text-center mb-5">
        <div class="col-lg-8">
          <span class="badge rounded-pill bg-primary-soft text-primary fw-semibold">Capabilities</span>
          <h2 class="display-6 fw-bold mt-3">Everything your commission operations team needs in one workspace.</h2>
          <p class="text-muted lead">TrackYourSheets centralises disparate carrier data, automates reconciliations, and empowers producers with live scorecards and payouts.</p>
        </div>
      </div>
      <div class="row g-4">
        {% for feature in feature_sections %}
        <div class="col-md-4">
          <div class="feature-card h-100 animate-rise">
            <div class="icon-badge mb-3">
              <i class="bi {{ feature.icon }}"></i>
            </div>
            <h3 class="h4 mb-2">{{ feature.title }}</h3>
            <p class="text-muted">{{ feature.description }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section id="personas" class="py-6 landing-section landing-section--muted">
    <div class="container">
      <div class="row justify-content-between align-items-center mb-5 g-4">
        <div class="col-lg-7">
          <span class="badge rounded-pill bg-success-soft text-success fw-semibold">Teams we empower</span>
          <h2 class="display-6 fw-bold mt-3">Purpose-built for every stakeholder who touches commission data.</h2>
          <p class="text-muted lead">From agency principals to frontline producers, TrackYourSheets turns complex, messy data into insights, playbooks, and confident decisions.</p>
        </div>
        <div class="col-lg-4 text-lg-end">
          <a href="{{ url_for('auth.signup') }}" class="btn btn-success btn-lg shadow-sm">See onboarding plans</a>
        </div>
      </div>
      <div class="row g-4">
        {% for persona in persona_sections %}
        <div class="col-md-4">
          <div class="persona-card h-100 animate-tilt">
            <div class="d-flex align-items-center gap-2 mb-3">
              <span class="icon-badge icon-badge--alt"><i class="bi {{ persona.icon }}"></i></span>
              <h3 class="h5 mb-0">{{ persona.title }}</h3>
            </div>
            <p class="text-muted">{{ persona.summary }}</p>
            <ul class="list-unstyled d-grid gap-2 mt-4">
              {% for bullet in persona.focus_points %}
              <li class="d-flex gap-2 align-items-start">
                <span class="text-success"><i class="bi bi-stars"></i></span>
                <span>{{ bullet }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section id="integrations" class="py-5 landing-section bg-white">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-4">
          <span class="badge rounded-pill bg-warning-soft text-warning fw-semibold">Integrations</span>
          <h2 class="h3 fw-bold mt-3">Connect your full revenue stack in minutes.</h2>
          <p class="text-muted mb-0">Native adapters for carrier downloads, accounting suites, collaboration hubs, and analytics platforms keep data flowing bi-directionally without brittle spreadsheets.</p>
        </div>
        <div class="col-lg-8">
          <div class="integration-grid">
            {% for integration in integrations %}
            <div class="integration-chip animate-pulse" style="animation-delay: {{ loop.index0 * 0.1 }}s">
              <span class="integration-name">{{ integration.name }}</span>
              <span class="integration-category">{{ integration.category }}</span>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-6 landing-section landing-section--muted" id="pricing">
    <div class="container">
      <div class="row justify-content-between align-items-end mb-5 g-3">
        <div class="col-lg-6">
          <span class="badge rounded-pill bg-success-soft text-success fw-semibold">Pricing</span>
          <h2 class="display-6 fw-bold mt-3">Plans that scale with every stage of your agency.</h2>
          <p class="text-muted lead">All plans include secure hosting, guided onboarding, and live email support. Choose the access level that matches your growth.</p>
        </div>
        <div class="col-lg-4 text-lg-end">
          <a href="{{ url_for('auth.signup') }}" class="btn btn-primary btn-lg shadow-sm">Compare plans in signup</a>
        </div>
      </div>
      <div class="row g-4">
        {% for plan in plan_details %}
        <div class="col-md-4">
          <div class="pricing-card h-100 {{ 'pricing-card--recommended' if plan.is_recommended }}">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <span class="badge rounded-pill bg-light text-primary fw-semibold">{{ plan.access_level }}</span>
              {% if plan.is_recommended %}
              <span class="badge rounded-pill bg-primary text-white fw-semibold">Most Popular</span>
              {% endif %}
            </div>
            <h3 class="h3 mb-1">{{ plan.name }}</h3>
            <p class="text-muted">{{ plan.tagline }}</p>
            <div class="display-5 fw-bold text-primary">{{ plan.price_label }}<span class="fs-5 text-muted fw-normal"> / {{ plan.billing_interval }}</span></div>
            <div class="small text-muted mb-2">
              {% if plan.included_users %}
              Includes {{ plan.included_users }} user{{ '' if plan.included_users == 1 else 's' }}{% if plan.extra_user_price %} · ${{ '%.2f'|format(plan.extra_user_price) }}/mo per additional seat{% endif %}
              {% else %}
              Flexible monthly pricing.
              {% endif %}
            </div>
            <hr>
            <ul class="list-unstyled d-grid gap-2 mb-4">
              {% for item in plan.feature_points %}
              <li class="d-flex gap-2 align-items-start">
                <span class="text-primary"><i class="bi bi-check-circle-fill"></i></span>
                <span>{{ item }}</span>
              </li>
              {% endfor %}
            </ul>
            <a href="{{ url_for('auth.signup') }}" class="btn btn-outline-primary w-100">Select {{ plan.name }}</a>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section id="workflow" class="py-6 bg-white landing-section">
    <div class="container">
      <div class="row align-items-center g-5">
        <div class="col-lg-5">
          <span class="badge rounded-pill bg-info-soft text-info fw-semibold">Workflow</span>
          <h2 class="display-6 fw-bold mt-3">From carrier download to producer payout in three steps.</h2>
          <p class="text-muted lead">Automated import pipelines, AI-powered anomaly detection, and producer portals keep your team focused on growth instead of spreadsheets.</p>
          <a href="{{ url_for('auth.login') }}" class="btn btn-outline-primary btn-lg mt-3">Sign in to your workspace</a>
        </div>
        <div class="col-lg-7">
          <ol class="timeline">
            {% for step in timeline_steps %}
            <li class="timeline-step">
              <div class="timeline-card shadow-sm">
                <h3 class="h5 mb-2">{{ step.title }}</h3>
                <p class="mb-0 text-muted">{{ step.description }}</p>
              </div>
            </li>
            {% endfor %}
          </ol>
        </div>
      </div>
    </div>
  </section>

  <section id="api" class="py-6 landing-section landing-section--muted">
    <div class="container">
      <div class="row justify-content-between align-items-center g-5">
        <div class="col-lg-6">
          <span class="badge rounded-pill bg-primary-soft text-primary fw-semibold">API &amp; integrations</span>
          <h2 class="display-6 fw-bold mt-3">Build on TrackYourSheets with REST, GraphQL, and webhooks.</h2>
          <p class="text-muted lead">Expose commission, payroll, HR, and analytics data securely. Our API guide walks through authentication, endpoints, rate limits, and how to launch a public portal at <strong>api.trackyoursheets.com</strong>.</p>
          <ul class="list-unstyled d-grid gap-2 text-muted">
            <li class="d-flex gap-2 align-items-start"><span class="text-primary"><i class="bi bi-cloud-check"></i></span><span>OAuth 2.1 client credentials with fine-grained scopes for workspaces, HR, and payroll.</span></li>
            <li class="d-flex gap-2 align-items-start"><span class="text-primary"><i class="bi bi-diagram-3"></i></span><span>Unified REST and GraphQL models so engineering teams can choose their preferred style.</span></li>
            <li class="d-flex gap-2 align-items-start"><span class="text-primary"><i class="bi bi-broadcast"></i></span><span>Webhook topics for payroll approvals, HR complaints, imports, and report exports.</span></li>
            <li class="d-flex gap-2 align-items-start"><span class="text-primary"><i class="bi bi-gear"></i></span><span>Step-by-step hosting instructions, DNS guidance, and TLS tips for api.trackyoursheets.com.</span></li>
          </ul>
          <div class="d-flex gap-3 mt-4">
            <a href="{{ api_guide_url }}" class="btn btn-primary btn-lg">Read the API guide</a>
            <a href="mailto:{{ support_email }}" class="btn btn-outline-primary btn-lg">Request API credentials</a>
          </div>
        </div>
        <div class="col-lg-5 offset-lg-1">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h3 class="h5">Launch checklist</h3>
              <ol class="text-muted small mb-0 d-grid gap-2">
                <li>Generate API credentials from Admin → Integrations and enable the API plan toggle.</li>
                <li>Publish the docs bundle from <code>docs/api.md</code> to your marketing site or documentation portal.</li>
                <li>Point the <code>api</code> subdomain at your CDN, issue certificates, and monitor uptime.</li>
                <li>Announce availability in your customer changelog and link back to this guide.</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="stories" class="py-6 bg-white landing-section">
    <div class="container">
      <div class="row justify-content-center text-center mb-5">
        <div class="col-lg-8">
          <span class="badge rounded-pill bg-secondary-soft text-secondary fw-semibold">Customer stories</span>
          <h2 class="display-6 fw-bold mt-3">Teams that switched to TrackYourSheets stay for the clarity.</h2>
          <p class="text-muted lead">Hear from agencies that turned chaotic spreadsheets into auditable, automated revenue operations.</p>
        </div>
      </div>
      <div class="row g-4">
        {% for testimonial in testimonials %}
        <div class="col-md-4">
          <div class="testimonial-card h-100 animate-rise">
            <div class="testimonial-quote">“{{ testimonial.quote }}”</div>
            <div class="testimonial-author mt-4">
              <div class="fw-semibold">{{ testimonial.name }}</div>
              <div class="text-muted small">{{ testimonial.role }}</div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section id="faq" class="py-6 landing-section landing-section--muted">
    <div class="container">
      <div class="row justify-content-between align-items-start g-4">
        <div class="col-lg-5">
          <span class="badge rounded-pill bg-dark text-white fw-semibold">FAQ</span>
          <h2 class="display-6 fw-bold mt-3">Top questions from growing agencies.</h2>
          <p class="text-muted lead">Still curious? Explore the answers below or drop our team a note and we&apos;ll tailor a walkthrough to your workflows.</p>
          <a href="mailto:{{ support_email }}" class="btn btn-dark btn-lg mt-3">Email {{ support_email }}</a>
        </div>
        <div class="col-lg-7">
          <div class="accordion" id="faqAccordion">
            {% for item in top_questions %}
            <div class="accordion-item">
              <h2 class="accordion-header" id="faqHeading{{ loop.index }}">
                <button class="accordion-button {{ 'collapsed' if not loop.first }}" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse{{ loop.index }}" aria-expanded="{{ 'true' if loop.first else 'false' }}" aria-controls="faqCollapse{{ loop.index }}">
                  {{ item.question }}
                </button>
              </h2>
              <div id="faqCollapse{{ loop.index }}" class="accordion-collapse collapse {{ 'show' if loop.first }}" aria-labelledby="faqHeading{{ loop.index }}" data-bs-parent="#faqAccordion">
                <div class="accordion-body text-muted">{{ item.answer }}</div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-6 bg-gradient text-white">
    <div class="container text-center">
      <h2 class="display-5 fw-bold mb-3">Ready to reconcile every commission statement automatically?</h2>
      <p class="lead text-white-75 mb-4">Launch TrackYourSheets in minutes, invite your team, and watch your operations transform.</p>
      <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
        <a href="{{ url_for('auth.signup') }}" class="btn btn-light btn-lg">Start free trial</a>
        <a href="mailto:{{ support_email }}" class="btn btn-outline-light btn-lg">Book a walkthrough</a>
      </div>
    </div>
  </section>
</main>
{% endblock %}
